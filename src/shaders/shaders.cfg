// Generic ShaderMake config: add more shaders here over time
// Format: <path/to/shader> -T <profile> -E <entry> [-m shaderModel]

// NOTE: if bindless resources are used, the following compiler options must be added to each shader:
// --compilerOptionsSPIRV="-fvk-bind-resource-heap 0 1 -fvk-bind-sampler-heap 0 2"
// where the heap numbers (1 and 2 in this case) must match the Vulkan set numbers assigned to the global texture and sampler heaps in createPipelineLayout in vulkan-resource-binding.cpp
//
// NVRHI maps HLSL spaceN to Vulkan Set N for all regular binding layouts.
// However, for Bindless Heaps (Mutable layouts using ResourceDescriptorHeap), NVRHI has a specific rule:
// 1. Regular Layouts occupy sets based on their registerSpace value (e.g., space 0 -> Set 0).
// 2. Bindless Layouts are automatically assigned to the next available sets after all regular layouts.
// This means that if you have N regular layouts, your bindless heaps will be assigned to Set N+1 and Set N+2, regardless of their registerSpace in HLSL.
// For example, if you have one regular layout using space 0, NVRHI calculates that numRegularDescriptorSets = 1. It then places your Global Texture Heap at Set 1 and your Global Sampler Heap at Set 2.
//
// On DX12, Global Heaps dont have a space. they are a built-in global object
// On Vulkan, they must have a set, so NVRHI forces them to the end of the set range to ensure they dont collide with any explicit spaceN mapping thats set up for normal resources.
// So if you get Vulkan validation error that complains about ResourceDescriptorHeap being used but not declared in the pipeline layout, double check their set numbers and declare them here appropriately.
//
// Thanks Vulkan, for this retarded requirement!

imgui.hlsl -T vs -E VSMain -m 6_8
imgui.hlsl -T ps -E PSMain -m 6_8
BasePass.hlsl -T vs -E VSMain -m 6_8 --compilerOptionsSPIRV="-fvk-bind-resource-heap 0 1 -fvk-bind-sampler-heap 0 2"
BasePass.hlsl -T ps -E GBuffer_PSMain -m 6_8 --compilerOptionsSPIRV="-fvk-bind-resource-heap 0 1 -fvk-bind-sampler-heap 0 2"
BasePass.hlsl -T ps -E GBuffer_PSMain_AlphaTest -m 6_8 -D ALPHA_TEST=1 -s _AlphaTest --compilerOptionsSPIRV="-fvk-bind-resource-heap 0 1 -fvk-bind-sampler-heap 0 2"
BasePass.hlsl -T ps -E Forward_PSMain -m 6_8 -D FORWARD_TRANSPARENT=1 -s _Forward_Transparent --compilerOptionsSPIRV="-fvk-bind-resource-heap 0 1 -fvk-bind-sampler-heap 0 2"
BasePass.hlsl -T ms -E MSMain -m 6_8 --compilerOptionsSPIRV="-fspv-extension=SPV_EXT_mesh_shader -fvk-bind-resource-heap 0 1 -fvk-bind-sampler-heap 0 2"
BasePass.hlsl -T as -E ASMain -m 6_8 --compilerOptionsSPIRV="-fspv-extension=SPV_EXT_mesh_shader -fvk-bind-resource-heap 0 1 -fvk-bind-sampler-heap 0 2"
GPUCulling.hlsl -T cs -E Culling_CSMain -m 6_8
GPUCulling.hlsl -T cs -E BuildIndirect_CSMain -m 6_8
HZBFromDepth.hlsl -T cs -E HZBFromDepth_CSMain -m 6_8
SPD.hlsl -T cs -E SPD_CSMain -m 6_8 -D SPD_NUM_CHANNELS=1 -s _1Channel
SPD.hlsl -T cs -E SPD_CSMain -m 6_8 -D SPD_NUM_CHANNELS=3 -s _3Channel
LuminanceHistogram.hlsl -T cs -E LuminanceHistogram_CSMain -m 6_8
ExposureAdaptation.hlsl -T cs -E ExposureAdaptation_CSMain -m 6_8
Tonemap.hlsl -T ps -E Tonemap_PSMain -m 6_8
Bloom.hlsl -T ps -E Prefilter_PSMain -m 6_8
Bloom.hlsl -T ps -E Downsample_PSMain -m 6_8
Bloom.hlsl -T ps -E Upsample_PSMain -m 6_8
FullScreen.hlsl -T ms -E MSMain -m 6_8 --compilerOptionsSPIRV="-fspv-extension=SPV_EXT_mesh_shader"
DeferredLighting.hlsl -T ps -E DeferredLighting_PSMain -m 6_8 --compilerOptionsSPIRV="-fvk-bind-resource-heap 0 1 -fvk-bind-sampler-heap 0 2"
